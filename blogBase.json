{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "title": "Learning Spatial Data", "subTitle": "This is where I keep what I learned", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P3": {"htmlDir": "docs/post/Booting from Grub Shell.html", "labels": ["miscellaneous"], "postTitle": "Booting from Grub Shell", "postUrl": "post/Booting%20from%20Grub%20Shell.html", "postSourceUrl": "https://github.com/fliquidy/fliquidy.github.io/issues/3", "commentNum": 0, "wordCount": 4275, "description": "After installing Ubuntu 20.04 on my server, my PC does not automatically boot into the system. Instead, it boots into a grub shell. \r\n\r\nSome commands that help me to boot from the grub shell are as follows.\r\n\r\n## `ls` command\r\n> Command: ls [arg \u2026]\r\n> List devices or files.\r\n> With no arguments, print all devices known to GRUB.\r\n\r\n> If the argument is a device name enclosed in parentheses (see [Device syntax](https://www.gnu.org/software/grub/manual/grub/html_node/Device-syntax.html#Device-syntax)), then print the name of the filesystem of that device.\r\n\r\n> If the argument is a directory given as an absolute file name (see [File name syntax](https://www.gnu.org/software/grub/manual/grub/html_node/File-name-syntax.html#File-name-syntax)), then list the contents of that directory.\r\n\r\nIn my case, it should be\r\n```\r\ngrub> ls\r\n(proc) (memdisk) (hd0) (hd0,msdos5) (hd0,msdos1)\r\n```\r\n\r\n```\r\ngrub> ls  (hd0,msdos5)\r\nPartition hd0,msdos5: Filesystem type ext* ......\r\n```\r\n\r\n## `set` command\r\n> Command: set [envvar=value]\r\n> Set the environment variable envvar to value. If invoked with no arguments, print all environment variables with their values. For the list of environment variables currently used by GRUB itself see the relevant section see [Environment](https://www.gnu.org/software/grub/manual/grub/html_node/Environment.html#Environment).\r\n\r\nIn my case, as my system is installed in (hd0,msdos5), it should be\r\n```\r\ngrub> set root=(hd0,msdos5)\r\n```\r\n\r\n## `linux` command\r\n> Command: linux file \u2026\r\n> Load a Linux kernel image from file. The rest of the line is passed verbatim as the kernel command-line. Any initrd must be reloaded after using this command (see [initrd](https://www.gnu.org/software/grub/manual/grub/html_node/initrd.html#initrd)).\r\n> On x86 systems, the kernel will be booted using the 32-bit boot protocol. Note that this means that the \u2018vga=\u2019 boot option will not work; if you want to set a special video mode, you will need to use GRUB commands such as \u2018set gfxpayload=1024x768\u2019 or \u2018set gfxpayload=keep\u2019 (to keep the same mode as used in GRUB) instead. GRUB can automatically detect some uses of \u2018vga=\u2019 and translate them to appropriate settings of \u2018gfxpayload\u2019. The linux16 command (see [linux16](https://www.gnu.org/software/grub/manual/grub/html_node/linux16.html#linux16)) avoids this restriction.\r\n\r\nIn my case, it should be\r\n```\r\ngrub> linux /boot/vmlinuz-5.15.0-67-genericr root=/dev/nvme0n1p5\r\n```\r\n\r\nNote that (1) After typing `vmlinuz`, you can press `tab` to auto-complete the name, and (2) `/dev/nvme0n1p5' should be the device where the root directory is on. To find this device, you can use the following command:\r\n```\r\ngrub> cat /etc/fstab\r\n...\r\n# / was on /dev/nvme0n1p5 during installation\r\n...\r\n```\r\n\r\n## `initrd` command\r\n>Command: initrd file [file \u2026]\r\n> Load, in order, all initrds for a Linux kernel image, and set the appropriate parameters in the Linux setup area in memory. This may only be used after the linux command (see [linux](https://www.gnu.org/software/grub/manual/grub/html_node/linux.html#linux)) has been run. See [GNU/Linux](https://www.gnu.org/software/grub/manual/grub/html_node/GNU_002fLinux.html#GNU_002fLinux) for more info on booting GNU/Linux. For more information on initrds see the GNU/Linux kernel [documentation](https://docs.kernel.org/filesystems/ramfs-rootfs-initramfs.html).\r\n> A new-style initrd (for kernels newer than 2.6) containing one file with leading path components can also be generated at run time. This can be done by prefixing an argument with newc: followed by the path of the file in the new initrd, a :, and then the GRUB file path to the file data to be be included.\r\n\r\nIn my case, it should be\r\n```\r\ngrub> initrd /boot/initrd.img-5.15.0-67-generic\r\n```\r\n\r\n## `boot` command\r\n> Command: boot\r\n> Boot the OS or chain-loader which has been loaded. Only necessary if running the fully interactive command-line (it is implicit at the end of a menu entry).\r\n\r\nIn my case, it should be\r\n```\r\ngrub> boot\r\n```\r\n\r\n\r\nPutting all these together, the commands that boot the system from the grub shell would be\r\n```\r\ngrub> set root=(hd0,msdos5)\r\ngrub> linux /boot/vmlinuz-5.15.0-67-genericr root=/dev/nvme0n1p5\r\ngrub> initrd /boot/initrd.img-5.15.0-67-generic\r\ngrub> boot\r\n```\r\n\r\n\r\n\u3002", "top": 0, "createdAt": 1717043852, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-05-30", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "miscellaneous": "#FBCA04", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "Learning Spatial Data", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://fliquidy.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}